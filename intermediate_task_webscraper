import requests
from bs4 import BeautifulSoup

def scrape_python_news():
    url = "https://www.python.org/"

    headers = {
        "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) "
                      "AppleWebKit/537.36 (KHTML, like Gecko) "
                      "Chrome/115.0 Safari/537.36"
    }

    response = requests.get(url, headers=headers)

    print("\nLatest Python.org News Headlines:\n")

    soup = BeautifulSoup(response.text, "html.parser")

    # TRY MULTIPLE POSSIBLE LOCATIONS
    possible_selectors = [
        # Old Python.org layout
        ".list-recent-posts li",
        # New layout (2025)
        "ul.menu li",
        # Another possible layout
        "ul li a",
        # Any article link
        "a[href*='blog']",
        # News items with class 'event'
        ".event-widget li"
    ]

    found_items = []

    for selector in possible_selectors:
        elements = soup.select(selector)
        for el in elements:
            text = el.get_text(strip=True)
            if len(text) > 8 and text not in found_items:
                found_items.append(text)

        if len(found_items) >= 5:  # enough data found
            break

    if not found_items:
        print("No headlines found â€” website heavily changed.")
        return

    # Print only first 5 clean headlines
    for i, headline in enumerate(found_items[:5], start=1):
        print(f"{i}. {headline}")

if __name__ == "__main__":
    scrape_python_news()
